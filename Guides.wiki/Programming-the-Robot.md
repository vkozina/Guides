**[Programming the Robot](Programming-the-Robot)**
* **[Overview](Programming-the-Robot#overview)**
  * **[Using this Guide](Programming-the-Robot#using-this-guide)**
  * **[Opening the Code](https://github.com/CMUFeiyue/Guides/wiki/Programming-the-Robot/_edit#opening-the-code)**
* **[RobotMap.java](Programming-the-Robot#robotmapjava)**
* **[Subsystem](Programming-the-Robot/#subsystem)**
* **[Robot.java](Programming-the-Robot#robotjava)**
* **[Command](Programming-the-Robot#command)**
* **[OI.java](Programming-the-Robot#oijava)**

##Overview
This guide introduces how to edit the classes to obtain a desired functionality. At the end of this guide, you should have code that spins a motor forwards or backward when you press a joystick button. 

###Using this Guide
This guide will walk you through the code needed to spin a motor at the press of a joystick button. Try not to copy-paste the provided code into your project, but rather type it out and understand its meaning. 

The portions of code meant to be inserted come with line numbers that reference the original code in the section. These line numbers are there for your convenience and should not be copied into the code. An example of how to correctly follow the line numbers can be found below.

**Original Code**
```java
1   public static void main(String [] args) {
2   
3   }
```

Adding the following lines.
```java
2.1     System.out.println("Hello there");
2.2     System.out.println("How are you?");
```

Should result in:
```java
1   public static main(String [] args) {
2       System.out.println("Hello there");
3       System.out.println("How are you?");
4   }
```
Any subsequent code additions will continue to reference the original line numbers.

Add a comment to line 3.
```java
3   }  // end of main method.
```

The final code should look like this:
```java
1   public static main(String [] args) {
2       System.out.println("Hello there");
3       System.out.println("How are you?");
4   } // end of main method
```

### Opening the Code
Open the FirstCBRProject you created using the arrows on the left to expand folders.

[[https://github.com/CMUFeiyue/Guides/blob/master/images/eclipse/package00.PNG]]

Go into the source (src) folder. The `.robot` package contains the autogenerated `OI.java`, `Robot.java` and `RobotMap.java`. The `.commands` and `.subsystems` packages should be empty (remember you should have deleted the `ExampleCommand.java` and `ExampleSubsystem.java` classes). Throughout this guide you will be editing the existing classes as well as adding new commands and subsystems.

The image below displays the final state of your project in the package manager for reference.

[[https://github.com/CMUFeiyue/Guides/blob/master/images/eclipse/package01.PNG]]



##RobotMap.java
The `RobotMap` class is for specifying the port for each component that is going to be use. For this project we will use a Joystick and a Motor. Our ports of each component are 1 for the Joystick and 1 for the Motor. Is important for you to know in what port is your components connected to.   

When the `RobotMap` class is first created, it contains the following code. Some of the comments have been omitted to conserve space. Feel free to delete any of the auto-generated comments, or refer to them for more information.

```java
1    //RobotMap.java
2    package org.usfirst.frc.team3504.robot;
3   
4    /**
5     * The RobotMap is a mapping from the ports sensors and actuators are wired into
6     * to a variable name. This provides flexibility changing wiring, makes checking
7     * the wiring easier and significantly reduces the number of magic numbers
8     * floating around.
9     */
10  
11   public class RobotMap {
12  
13  
14   }
```

Add the following lines to initialize the joystick and motor objects.
```java
12       public static final int JOYSTICK_PORT = 1;
13       public static final int MOTOR_PORT = 1;
```

##Subsystem
Create a subsystem called `DriveMotor`. It should auto-generate the following code.
```java
1   //Motor.java
2   package org.usfirst.frc.team3504.robot.subsystems;
3   
4   import edu.wpi.first.wpilibj.command.Subsystem;
5   
6   public class DriveMotor extends Subsystem {
7       
8       public void initDefaultCommand() {
9   
10    }
11  }
```

Import the `RobotMap` and the type of motor that you want to use. We will be using `CANTalon`.
```java
5.1 import org.usfirst.frc.team3504.robot.RobotMap;
5.2 import edu.wpi.first.wpilibj.CANTalon;
```

Initialize a motor object inside the `DriveMotor` class. In this example it is called motor.
```java
7.1 private static CANTalon motor;
```

Make a constructor in the `DriveMotor` class under the last statement and declare the motor within.
```java
7.2 public DriveMotor() {
7.3     motor = new CANTalon(RobotMap.MOTOR_PORT);
7.4 }
```

Create methods that represent actions within the `DriveMotor` class. The `motor.set()` method has one parameter -- the percentage of power being sent to the motor, where 1 = 100%.
```java
7.5  // spins the motor forward
7.6  public void forward() {
7.7      motor.set(0.4);
7.8  }
7.9
7.10 // spins the motor backward
7.11 public void backward() {
7.12     motor.set(-0.4);
7.13 }
7.14
7.15 // stops spinning the motor
7.15 public void stop() {
7.16     motor.set(0);
7.17 }
```

##Robot.java

**Remove lines 8, 9, 15 and 24 from the code. They are marked with `>>>`**

```java
1    //Robot.java
2    package org.usfirst.frc.team3504.robot;
3    
4    import edu.wpi.first.wpilibj.IterativeRobot;
5    import edu.wpi.first.wpilibj.command.Command;
6    import edu.wpi.first.wpilibj.command.Scheduler;
7    import edu.wpi.first.wpilibj.livewindow.LiveWindow;
>>> 8    import org.usfirst.frc.team3504.robot.commands.ExampleCommand;
>>> 9    import org.usfirst.frc.team3504.robot.subsystems.ExampleSubsystem;
10   import edu.wpi.first.wpilibj.smartdashboard.SendableChooser;
11   import edu.wpi.first.wpilibj.smartdashboard.SmartDashboard;
12   
13   public class Robot extends IterativeRobot {
14   
>>> 15     public static final ExampleSubsystem exampleSubsystem = new ExampleSubsystem();
16     public static OI oi;
17   
18     Command autonomousCommand;
19     SendableChooser chooser;
20   
21     public void robotInit() {
22   	    oi = new OI();
23         chooser = new SendableChooser();
>>> 24         chooser.addDefault("Default Auto", new ExampleCommand());
25     //  chooser.addObject("My Auto", new MyAutoCommand());
26         SmartDashboard.putData("Auto mode", chooser);
27     }
28   	
29     public void disabledInit(){
30   
31     }
32   	
33   	public void disabledPeriodic() {
34   	    Scheduler.getInstance().run();
35   	}
36   
37     public void autonomousInit() {
38         autonomousCommand = (Command) chooser.getSelected();           
49         if (autonomousCommand != null) autonomousCommand.start();
40     }
41   
42     public void autonomousPeriodic() {
43         Scheduler.getInstance().run();
44     }
45   
46     public void teleopInit() {
47         if (autonomousCommand != null) autonomousCommand.cancel();
48     }
49   
50     public void teleopPeriodic() {
51         Scheduler.getInstance().run();
52     }
53       
54     public void testPeriodic() {
55         LiveWindow.run();
56     }
57   }
```

Import the `DriveMotor` subsystem you just created.
```java
12   import org.usfirst.frc.team3504.robot.subsystems.DriveMotor;
```

Initialize the `DriveMotor` subsystem in the `Robot` class.
```java
17  public static final DriveMotor DRIVEMOTOR = new DriveMotor();
```

##Command
Create two commands named `DriveForward` and `DriveBackward`.

```java
1   package org.usfirst.frc.team3504.robot.commands;
2   
3   import edu.wpi.first.wpilibj.command.Command;
4   
5   public class DriveForward extends Command {
6   
7       public DriveForward() {
8          
9       }
10  
11      protected void initialize() {
12  
13      }
14  
15      protected void execute() {
16  
17      }
18  
19      protected boolean isFinished() {
20          return false;
21      }
22  
23      protected void end() {
24  
25      }
26  
27      protected void interrupted() {
28  
29      }
30  } 
```

Add the following line to import the `Robot` class.
```java
4   import org.usfirst.frc.team3504.robot.Robot;
```

Change the `requires` within the constructor to require the `DriveMotor` subsystem.

```java
8  requires(Robot.DRIVEMOTOR);
```

In the execute method, specify the action desired to happen when this command is called. 
```java
16  Robot.DRIVEMOTOR.forward();    OR    18  Robot.DRIVEMOTOR.backward();
```

In the method end, make sure to stop the robot so that it doesnâ€™t run forever.
```java
24  Robot.DRIVEMOTOR.stop();
```

##OI.java
**Remove line 5 from the code. It is marked with `>>>`**

```java
1    //IO.java
2    package org.usfirst.frc.team3504.robot;
3
4    import edu.wpi.first.wpilibj.buttons.Button;
>>> 5    import org.usfirst.frc.team3504.robot.commands.ExampleCommand;
6
7    public class OI {
8
9    }
```

Insert the following **import** statements, allowing you to use the classes created as well as the joystick.

```java
6.1  import edu.wpi.first.wpilibj.Joystick;
6.2  import edu.wpi.first.wpilibj.buttons.JoystickButton;
6.3  import org.usfirst.frc.team3504.robot.commands.DriveForward;
6.4  import org.usfirst.frc.team3504.robot.commands.DriveBackward;
```

**Instantiate** a Joystick object and create the buttons within the IO class.  

```java
8.1  Joystick joystickName = new Joystick(RobotMap.JOYSTICK_PORT);
8.2  Button button1 = new JoystickButton(joystickName, 1); 
8.3  Button button2 = new JoystickButton(joystickName, 2);
```

Below that, create the constructor for the IO class.
```java
8.4  public OI () {
8.5      button1.whileHeld(new DriveForward()); 
8.6      button2.whenPressed(new DriveBackward());
8.7  }
```